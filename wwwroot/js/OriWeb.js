!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.OriWeb=n():e.OriWeb=n()}(window,(function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="~/js/",t(t.s=0)}([function(e,n,t){"use strict";t.r(n);var r={};t.r(r),t.d(r,"Sleep",(function(){return a})),t.d(r,"WaitForSession",(function(){return s})),t.d(r,"WaitForConnection",(function(){return f})),t.d(r,"InvalidPropertyException",(function(){return p})),t.d(r,"LineInfo",(function(){return d})),t.d(r,"BlazorIDToElement",(function(){return b}));var o={};t.r(o),t.d(o,"AvailableClientCalls",(function(){return v})),t.d(o,"OriWebClientSession",(function(){return g}));var i,l=(i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)},function(e,n){function t(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),u=function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function l(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(l,u)}c((r=r.apply(e,n||[])).next())}))},c=function(e,n){var t,r,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(o=(o=l.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){l.label=i[1];break}if(6===i[0]&&l.label<o[1]){l.label=o[1],o=i;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(i);break}o[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};function a(e){return new Promise((function(n){return setTimeout(n,e)}))}function s(){return u(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return console.log("Waiting for OriClientSession to be established..."),[4,a(500)];case 1:e.sent(),e.label=2;case 2:if(null==globalThis.CurrentOriSession)return[3,0];e.label=3;case 3:return[2,!0]}}))}))}function f(){return u(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,s()];case 1:e.sent(),e.label=2;case 2:return console.log("Waiting for OriClientSession to Connect..."),[4,a(500)];case 3:e.sent(),e.label=4;case 4:if(0==globalThis.CurrentOriSession.CheckConnection)return[3,2];e.label=5;case 5:return[2,!0]}}))}))}var p=function(e){function n(t){var r=e.call(this,t.message)||this;return r.name="InvalidPropertyException",r.exceptionInfo=t,r.message=r.exceptionInfo.message,console.error(t.message),Object.setPrototypeOf(r,n.prototype),r}return l(n,e),n}(Error),d=function(){function e(){var e=new Error;if(e&&e.stack){var n=e.stack.split("\n")[2],t=n.slice(n.lastIndexOf("/"),n.lastIndexOf(")"));0==t.length&&(t=n.slice(n.lastIndexOf("("),n.lastIndexOf(")")));var r=t.slice(1,t.indexOf(":")),o=t.slice(t.indexOf(":")+1,t.lastIndexOf(":")),i=t.slice(t.lastIndexOf(":")+1);this.fileName=r,this.lineNumber=Number(o),this.columnNumber=Number(i)}}return e.prototype.toString=function(){return this.fileName+" "+this.lineNumber+" "+this.columnNumber},e}();function b(e){var n=function(n,t){for(var r=e,o=n.split("."),i=o.length,l=0;l<i-1;l++){var u=o[l];r[u]||(r[u]={}),r=r[u]}r[o[i-1]]=t},t=function(e,r){for(var o in void 0===r&&(r=null),e)e.hasOwnProperty(o)&&("object"==typeof e[o]?(r=null===r?o:r+"."+o,t(e[o],r)):"__internalId"===o&&"string"==typeof e[o]&&null!==r&&n(r,(i=e[o],l=void 0,l="["+function(e){return"_bl_"+e}(i)+"]",document.querySelector(l))));var i,l};return t(e),e}var h=function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function l(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(l,u)}c((r=r.apply(e,n||[])).next())}))},y=function(e,n){var t,r,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(o=(o=l.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){l.label=i[1];break}if(6===i[0]&&l.label<o[1]){l.label=o[1],o=i;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(i);break}o[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},v=function(){function e(){}return e.prototype.ReloadBrowser=function(){console.log("Webpack change, reloading..."),location.reload()},e.prototype.InjectIntoJSSession=function(e){return h(this,void 0,void 0,(function(){var n;return y(this,(function(t){switch(t.label){case 0:return console.log("DotNetInterop Inject called from server"),console.log(e),[4,r.WaitForSession()];case 1:return t.sent(),null!=globalThis.CurrentOriSession?((n=globalThis.CurrentOriSession.InjectDotNetInterop(e))||console.error(),[2,Promise.resolve(n)]):(console.error(),[2,Promise.resolve(!1)])}}))}))},e.prototype.RecieveComponent=function(e){console.log("recieved list of components"),console.log(e),globalThis.WorkingThroughJSParam=e},e}();globalThis.OriJSClientCalls=new v,Object.freeze(globalThis.OriJSClientCalls);var g=function(){function e(){}return Object.defineProperty(e.prototype,"CheckConnection",{get:function(){return null!=this._dotNetInterop},enumerable:!0,configurable:!0}),e.prototype.InjectDotNetInterop=function(e){return null==this._dotNetInterop&&(this._dotNetInterop=e),null!=this._dotNetInterop&&(console.log("DotNetInterop Injected"),console.log(this._dotNetInterop),!0)},e.prototype.WorkingNewBuildingBlock=function(){return h(this,void 0,void 0,(function(){var e,n;return y(this,(function(t){switch(t.label){case 0:return this.CheckConnection?(n=(e=r).BlazorIDToElement,[4,this._dotNetInterop.invokeMethodAsync("BuildNewBuildingBlock")]):[3,2];case 1:return[2,n.apply(e,[t.sent()])];case 2:return[2]}}))}))},e.prototype.FailedNewBuildingBlock=function(){return h(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return this.CheckConnection?[4,this._dotNetInterop.invokeMethodAsync("BuildNewBuildingBlock")]:[3,2];case 1:return[2,e.sent()];case 2:return[2]}}))}))},e}(),w=function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function l(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(l,u)}c((r=r.apply(e,n||[])).next())}))},m=function(e,n){var t,r,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(o=(o=l.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){l.label=i[1];break}if(6===i[0]&&l.label<o[1]){l.label=o[1],o=i;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(i);break}o[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Blazor.start({}).then((function(){console.debug("Blazor has connected"),Object.defineProperty(window,"CurrentOriSession",{value:new o.OriWebClientSession,writable:!1})})),w(void 0,void 0,void 0,(function(){var e,n;return m(this,(function(t){switch(t.label){case 0:return[4,r.WaitForConnection()];case 1:return t.sent(),[4,globalThis.CurrentOriSession.WorkingNewBuildingBlock()];case 2:return e=t.sent(),[4,globalThis.CurrentOriSession.FailedNewBuildingBlock()];case 3:return n=t.sent(),globalThis.WorkingComponent=e,globalThis.FailedComponent=n,console.log("New buildingblock called"),[2]}}))}))}])}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9PcmlXZWIvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL09yaVdlYi93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9PcmlXZWIvLi9DbGllbnQvQ29yZS9DbGllbnQuSGVscGVycy50cyIsIndlYnBhY2s6Ly9PcmlXZWIvLi9DbGllbnQvQ29yZS9DbGllbnQuQ29yZS50cyIsIndlYnBhY2s6Ly9PcmlXZWIvLi9DbGllbnQvT3JpV2ViLnRzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsIndpbmRvdyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJTbGVlcCIsIm1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiV2FpdEZvclNlc3Npb24iLCJjb25zb2xlIiwibG9nIiwidW5kZWZpbmVkIiwiZ2xvYmFsVGhpcyIsIkN1cnJlbnRPcmlTZXNzaW9uIiwiV2FpdEZvckNvbm5lY3Rpb24iLCJDaGVja0Nvbm5lY3Rpb24iLCJleGNlcHRpb25JbmZvIiwibWVzc2FnZSIsImVycm9yIiwic2V0UHJvdG90eXBlT2YiLCJJbnZhbGlkUHJvcGVydHlFeGNlcHRpb24iLCJFcnJvciIsIm5ld0Vycm9yIiwic3RhY2siLCJzdGFja0xpbmUiLCJzcGxpdCIsImNhbGxlcl9saW5lIiwic2xpY2UiLCJsYXN0SW5kZXhPZiIsImxlbmd0aCIsImZpbGVuYW1lX2Jhc2UiLCJpbmRleE9mIiwibGluZV9ubyIsImxpbmVfcG9zIiwidGhpcyIsImZpbGVOYW1lIiwibGluZU51bWJlciIsIk51bWJlciIsImNvbHVtbk51bWJlciIsInRvU3RyaW5nIiwiQmxhem9ySURUb0VsZW1lbnQiLCJpbmNvbWluZ09iamVjdCIsInNldFZhbHVlIiwicGF0aCIsInNjaGVtYSIsInBMaXN0IiwibGVuIiwiZWxlbSIsIml0ZXJhdGVPYmplY3QiLCJvYmoiLCJyZWZlcmVuY2VDYXB0dXJlSWQiLCJzZWxlY3RvciIsImdldENhcHR1cmVJZEF0dHJpYnV0ZU5hbWUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJSZWxvYWRCcm93c2VyIiwibG9jYXRpb24iLCJyZWxvYWQiLCJJbmplY3RJbnRvSlNTZXNzaW9uIiwibXlPcmlXZWJTZXNzaW9uIiwiaW5qZWN0aW9uUmVzdWx0cyIsIkluamVjdERvdE5ldEludGVyb3AiLCJSZWNpZXZlQ29tcG9uZW50IiwiY29tcG9uZW50IiwiV29ya2luZ1Rocm91Z2hKU1BhcmFtIiwiT3JpSlNDbGllbnRDYWxscyIsImZyZWV6ZSIsIl9kb3ROZXRJbnRlcm9wIiwiaW5jb21pbmdJbnRlcm9wIiwiV29ya2luZ05ld0J1aWxkaW5nQmxvY2siLCJpbnZva2VNZXRob2RBc3luYyIsIkZhaWxlZE5ld0J1aWxkaW5nQmxvY2siLCJCbGF6b3IiLCJzdGFydCIsInRoZW4iLCJkZWJ1ZyIsIk9yaVdlYkNsaWVudFNlc3Npb24iLCJ3cml0YWJsZSIsIk9yaUNvbXBvbmVudDIiLCJPcmlDb21wb25lbnQzIiwiV29ya2luZ0NvbXBvbmVudCIsIkZhaWxlZENvbXBvbmVudCJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBMkNBLEVBQU1DLEdBQzFCLGlCQUFaQyxTQUEwQyxpQkFBWEMsT0FDeENBLE9BQU9ELFFBQVVELElBQ1EsbUJBQVhHLFFBQXlCQSxPQUFP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MEJ6RCxNQUF2QnVCLEtBQUtpQyxpQkFFSmpDLEtBQUtpQyxlQUFpQkMsR0FHQXpELE1BQXZCdUIsS0FBS2lDLGlCQUVKMUQsUUFBUUMsSUFBSSwwQkFDWkQsUUFBUUMsSUFBSXdCLEtBQUtpQyxpQkFDVixJQUtGLFlBQUFFLHdCQUFiLFcseUdBR09uQyxLQUFLbkIsaUJBR0UsUUFBUXlCLGtCQUFrQixHQUFNTixLQUFLaUMsZUFBZUcsa0JBQWtCLDJCQUg3RSxNLE9BSUMsTUFBTyxDQUFQLEVBRE0sV0FBMEIsWSx5QkFRM0IsWUFBQUMsdUJBQWIsVyxpR0FHT3JDLEtBQUtuQixnQkFHRSxHQUFNbUIsS0FBS2lDLGVBQWVHLGtCQUFrQiwwQkFIbkQsTSxPQUlDLE1BQU8sQ0FBUCxFQURNLFUseUJBT2xCLEVBNURBLEcsNjBDQ3RDSUUsT0FBT0MsTUFBTSxJQUFJQyxNQUFLLFdBQ2xCakUsUUFBUWtFLE1BQU0sd0JBRWQ5RixPQUFPQyxlQUFlZixPQUFRLG9CQUFxQixDQUMvQ3FCLE1BQU8sSUFBSSxFQUFZd0Ysb0JBQ3ZCQyxVQUFVLE9BS3JCLG1DLDBEQUNHLFNBQU0sRUFBUS9ELHFCLE9BRU0sT0FGcEIsU0FFb0IsR0FBTUYsV0FBV0Msa0JBQWtCd0QsMkIsT0FDbkMsT0FEaEJTLEVBQWdCLFNBQ0EsR0FBTWxFLFdBQVdDLGtCQUFrQjBELDBCLGNBQW5EUSxFQUFnQixTQUNuQm5FLFdBQW1Cb0UsaUJBQW1CRixFQUN0Q2xFLFdBQW1CcUUsZ0JBQWtCRixFQUV0Q3RFLFFBQVFDLElBQUksNEIiLCJmaWxlIjoiT3JpV2ViLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiT3JpV2ViXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIk9yaVdlYlwiXSA9IGZhY3RvcnkoKTtcbn0pKHdpbmRvdywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJ+L2pzL1wiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgKiBhcyBPcmlXZWIgZnJvbSBcIi4vQ2xpZW50LkltcG9ydEV4cG9ydGNvbnRyb2xsZXJcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUludmFsaWRQcm9wZXJ0eUluZm9cclxue1xyXG4gICAgbWVzc2FnZTogc3RyaW5nXHJcblxyXG4gICAgYnVpbGRpbmdCbG9ja0lEOiBzdHJpbmdcclxuICAgIGZpbGVOYW1lOiBzdHJpbmdcclxuICAgIGxpbmVOdW1iZXI6IHN0cmluZ1xyXG4gICAgXHJcbiAgICB2YWxpZEFQSVZhbHVlczogc3RyaW5nW11cclxuICAgIHZhbGlkYXRpb25SZWdleDogc3RyaW5nXHJcbiAgICBleGNsdXNpb25SZWdleDogc3RyaW5nXHJcbiAgICB2YWxpZFN0cmluZ3M6IHN0cmluZ1tdXHJcbiAgICBleGNsdXNpb25TdHJpbmdzOiBzdHJpbmdbXVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gU2xlZXAobXM6IG51bWJlcikge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gV2FpdEZvclNlc3Npb24oKVxyXG57XHJcbiAgICBkb1xyXG4gICAge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiV2FpdGluZyBmb3IgT3JpQ2xpZW50U2Vzc2lvbiB0byBiZSBlc3RhYmxpc2hlZC4uLlwiKTtcclxuICAgICAgICBhd2FpdCBTbGVlcCg1MDApO1xyXG4gICAgfSB3aGlsZShnbG9iYWxUaGlzLkN1cnJlbnRPcmlTZXNzaW9uID09IHVuZGVmaW5lZCk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFdhaXRGb3JDb25uZWN0aW9uKClcclxue1xyXG4gICAgYXdhaXQgV2FpdEZvclNlc3Npb24oKTtcclxuICAgIGRvXHJcbiAgICB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJXYWl0aW5nIGZvciBPcmlDbGllbnRTZXNzaW9uIHRvIENvbm5lY3QuLi5cIik7XHJcbiAgICAgICAgYXdhaXQgU2xlZXAoNTAwKTtcclxuICAgIH0gd2hpbGUoZ2xvYmFsVGhpcy5DdXJyZW50T3JpU2Vzc2lvbi5DaGVja0Nvbm5lY3Rpb24gPT0gZmFsc2UpO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBJbnZhbGlkUHJvcGVydHlFeGNlcHRpb24gZXh0ZW5kcyBFcnJvciB7XHJcbiAgICByZWFkb25seSBuYW1lOiBzdHJpbmcgPSBcIkludmFsaWRQcm9wZXJ0eUV4Y2VwdGlvblwiXHJcbiAgICBtZXNzYWdlOiBzdHJpbmc7XHJcblxyXG4gICAgZXhjZXB0aW9uSW5mbzogSUludmFsaWRQcm9wZXJ0eUluZm9cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihleGNlcHRpb25JbmZvOiBJSW52YWxpZFByb3BlcnR5SW5mbykge1xyXG4gICAgICAgIHN1cGVyKGV4Y2VwdGlvbkluZm8ubWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy5leGNlcHRpb25JbmZvID0gZXhjZXB0aW9uSW5mb1xyXG4gICAgICAgIHRoaXMubWVzc2FnZSA9IHRoaXMuZXhjZXB0aW9uSW5mby5tZXNzYWdlXHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5lcnJvcihleGNlcHRpb25JbmZvLm1lc3NhZ2UpXHJcbiAgICAgICAgLy8gU2V0IHRoZSBwcm90b3R5cGUgZXhwbGljaXRseS5cclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgSW52YWxpZFByb3BlcnR5RXhjZXB0aW9uLnByb3RvdHlwZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBMaW5lSW5mb1xyXG57XHJcbiAgICBmaWxlTmFtZTogc3RyaW5nO1xyXG4gICAgbGluZU51bWJlcjogbnVtYmVyO1xyXG4gICAgY29sdW1uTnVtYmVyOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKVxyXG4gICAge1xyXG4gICAgICAgIGxldCBuZXdFcnJvciA9IG5ldyBFcnJvcigpXHJcbiAgICAgICAgaWYobmV3RXJyb3IpXHJcbiAgICAgICAgaWYobmV3RXJyb3Iuc3RhY2spXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgc3RhY2tMaW5lID0gbmV3RXJyb3Iuc3RhY2suc3BsaXQoXCJcXG5cIilbMl07XHJcbiAgICAgICAgICAgIGxldCBjYWxsZXJfbGluZSA9IHN0YWNrTGluZS5zbGljZShzdGFja0xpbmUubGFzdEluZGV4T2YoJy8nKSxzdGFja0xpbmUubGFzdEluZGV4T2YoJyknKSlcclxuICAgICAgICAgICAgaWYgKCBjYWxsZXJfbGluZS5sZW5ndGggPT0gMCApIHtcclxuICAgICAgICAgICAgICAgIGNhbGxlcl9saW5lID0gc3RhY2tMaW5lLnNsaWNlKHN0YWNrTGluZS5sYXN0SW5kZXhPZignKCcpLHN0YWNrTGluZS5sYXN0SW5kZXhPZignKScpKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBmaWxlbmFtZV9iYXNlID0gY2FsbGVyX2xpbmUuc2xpY2UoMCsxLGNhbGxlcl9saW5lLmluZGV4T2YoJzonKSk7XHJcbiAgICAgICAgICAgIGxldCBsaW5lX25vID0gY2FsbGVyX2xpbmUuc2xpY2UoY2FsbGVyX2xpbmUuaW5kZXhPZignOicpKzEsY2FsbGVyX2xpbmUubGFzdEluZGV4T2YoJzonKSk7XHJcbiAgICAgICAgICAgIGxldCBsaW5lX3BvcyA9IGNhbGxlcl9saW5lLnNsaWNlKGNhbGxlcl9saW5lLmxhc3RJbmRleE9mKCc6JykrMSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLmZpbGVOYW1lID0gZmlsZW5hbWVfYmFzZVxyXG4gICAgICAgICAgICB0aGlzLmxpbmVOdW1iZXIgPSBOdW1iZXIobGluZV9ubylcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5OdW1iZXIgPSBOdW1iZXIobGluZV9wb3MpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB0b1N0cmluZygpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlsZU5hbWUgKyBcIiBcIiArIHRoaXMubGluZU51bWJlciArIFwiIFwiICsgdGhpcy5jb2x1bW5OdW1iZXI7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEVsZW1lbnRCeUNhcHR1cmVJZChyZWZlcmVuY2VDYXB0dXJlSWQ6IHN0cmluZykge1xyXG4gICAgY29uc3Qgc2VsZWN0b3IgPSBgWyR7Z2V0Q2FwdHVyZUlkQXR0cmlidXRlTmFtZShyZWZlcmVuY2VDYXB0dXJlSWQpfV1gO1xyXG4gICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRDYXB0dXJlSWRBdHRyaWJ1dGVOYW1lKHJlZmVyZW5jZUNhcHR1cmVJZDogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gYF9ibF8ke3JlZmVyZW5jZUNhcHR1cmVJZH1gO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gQmxhem9ySURUb0VsZW1lbnQoaW5jb21pbmdPYmplY3Q6IGFueSk6IGFueVxyXG57XHJcbiAgICBsZXQgZWxlbWVudFJlZktleSA9ICdfX2ludGVybmFsSWQnO1xyXG5cclxuICAgIGxldCBzZXRWYWx1ZSA9IChwYXRoOiBzdHJpbmcsIHZhbHVlOiBFbGVtZW50IHwgbnVsbCkgPT4ge1xyXG4gICAgICAgIHZhciBzY2hlbWEgPSBpbmNvbWluZ09iamVjdDtcclxuICAgICAgICB2YXIgcExpc3QgPSBwYXRoLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgdmFyIGxlbiA9IHBMaXN0Lmxlbmd0aDtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuLTE7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgZWxlbSA9IHBMaXN0W2ldO1xyXG4gICAgICAgICAgICBpZiggIXNjaGVtYVtlbGVtXSApIHNjaGVtYVtlbGVtXSA9IHt9XHJcbiAgICAgICAgICAgIHNjaGVtYSA9IHNjaGVtYVtlbGVtXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNjaGVtYVtwTGlzdFtsZW4tMV1dID0gdmFsdWU7XHJcbiAgICB9O1xyXG5cclxuICAgIGxldCBpdGVyYXRlT2JqZWN0ID0gKG9iajogYW55LCBzdGFjazogc3RyaW5nIHwgbnVsbCA9IG51bGwpOiBhbnkgPT4ge1xyXG4gICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIG9iaikge1xyXG4gICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmpbcHJvcGVydHldID09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihzdGFjayA9PT0gbnVsbCkgc3RhY2sgPSBwcm9wZXJ0eVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Ugc3RhY2sgPSBzdGFjayArIFwiLlwiICsgcHJvcGVydHlcclxuICAgICAgICAgICAgICAgICAgICBpdGVyYXRlT2JqZWN0KG9ialtwcm9wZXJ0eV0sICBzdGFjayk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKChwcm9wZXJ0eSA9PT0gZWxlbWVudFJlZktleSkgJiYgdHlwZW9mIG9ialtwcm9wZXJ0eV0gPT09ICdzdHJpbmcnKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3RhY2sgIT09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRWYWx1ZShzdGFjaywgZ2V0RWxlbWVudEJ5Q2FwdHVyZUlkKG9ialtwcm9wZXJ0eV0pKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgXHJcblxyXG4gICAgaXRlcmF0ZU9iamVjdChpbmNvbWluZ09iamVjdCk7XHJcbiAgICByZXR1cm4gaW5jb21pbmdPYmplY3Q7XHJcbn0iLCIvLy8gPHJlZmVyZW5jZSB0eXBlcz1cIkBtaWNyb3NvZnQvQmxhem9yL01pY3Jvc29mdC5KU0ludGVyb3BcIiAvPlxyXG5cclxuaW1wb3J0ICogYXMgT3JpV2ViIGZyb20gJy4vQ2xpZW50LkltcG9ydEV4cG9ydGNvbnRyb2xsZXInXHJcbmltcG9ydCB7SGVscGVyc30gZnJvbSBcIi4vQ2xpZW50LkltcG9ydEV4cG9ydGNvbnRyb2xsZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBBdmFpbGFibGVDbGllbnRDYWxsc1xyXG57XHJcbiAgICBwdWJsaWMgUmVsb2FkQnJvd3NlcigpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIldlYnBhY2sgY2hhbmdlLCByZWxvYWRpbmcuLi5cIilcclxuICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIGFzeW5jIEluamVjdEludG9KU1Nlc3Npb24obXlPcmlXZWJTZXNzaW9uOiBEb3ROZXQuRG90TmV0T2JqZWN0KTogUHJvbWlzZTxCb29sZWFuPntcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkRvdE5ldEludGVyb3AgSW5qZWN0IGNhbGxlZCBmcm9tIHNlcnZlclwiKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKG15T3JpV2ViU2Vzc2lvbilcclxuICAgICAgICBhd2FpdCBPcmlXZWIuSGVscGVycy5XYWl0Rm9yU2Vzc2lvbigpO1xyXG4gICAgXHJcbiAgICAgICAgaWYoZ2xvYmFsVGhpcy5DdXJyZW50T3JpU2Vzc2lvbiAhPSB1bmRlZmluZWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgaW5qZWN0aW9uUmVzdWx0czogQm9vbGVhbiA9IGdsb2JhbFRoaXMuQ3VycmVudE9yaVNlc3Npb24uSW5qZWN0RG90TmV0SW50ZXJvcChteU9yaVdlYlNlc3Npb24pO1xyXG4gICAgICAgICAgICBpZighaW5qZWN0aW9uUmVzdWx0cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoaW5qZWN0aW9uUmVzdWx0cyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIFJlY2lldmVDb21wb25lbnQoY29tcG9uZW50OiBvYmplY3QpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInJlY2lldmVkIGxpc3Qgb2YgY29tcG9uZW50c1wiKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhjb21wb25lbnQpO1xyXG4gICAgICAgIChnbG9iYWxUaGlzIGFzIGFueSkuV29ya2luZ1Rocm91Z2hKU1BhcmFtID0gY29tcG9uZW50O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBKUyBDYWxsYWJsZSBGdW5jdGlvbnNcclxuZ2xvYmFsVGhpcy5PcmlKU0NsaWVudENhbGxzID0gbmV3IEF2YWlsYWJsZUNsaWVudENhbGxzKCk7XHJcbk9iamVjdC5mcmVlemUoZ2xvYmFsVGhpcy5PcmlKU0NsaWVudENhbGxzKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBPcmlXZWJDbGllbnRTZXNzaW9uXHJcbntcclxuICAgIHByaXZhdGUgX2RvdE5ldEludGVyb3A6IERvdE5ldC5Eb3ROZXRPYmplY3Q7XHJcbiAgICBwdWJsaWMgTmV3T3JpQ29tcG9uZW50OiBhbnk7XHJcbiAgICBcclxuICAgIGdldCBDaGVja0Nvbm5lY3Rpb24oKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYodGhpcy5fZG90TmV0SW50ZXJvcCAhPSB1bmRlZmluZWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKClcclxuICAgIHtcclxuICAgIH1cclxuXHJcbiAgICBJbmplY3REb3ROZXRJbnRlcm9wKGluY29taW5nSW50ZXJvcDogRG90TmV0LkRvdE5ldE9iamVjdCk6IEJvb2xlYW5cclxuICAgIHtcclxuICAgICAgICBpZih0aGlzLl9kb3ROZXRJbnRlcm9wID09IHVuZGVmaW5lZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RvdE5ldEludGVyb3AgPSBpbmNvbWluZ0ludGVyb3A7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aGlzLl9kb3ROZXRJbnRlcm9wICE9IHVuZGVmaW5lZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRG90TmV0SW50ZXJvcCBJbmplY3RlZFwiKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5fZG90TmV0SW50ZXJvcCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBhc3luYyBXb3JraW5nTmV3QnVpbGRpbmdCbG9jaygpOiBcclxuICAgIFByb21pc2U8YW55PiAgICBcclxuICAgIHtcclxuICAgICAgICBpZih0aGlzLkNoZWNrQ29ubmVjdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCBuZXdDb21wb25lbnQ6IGFueVxyXG4gICAgICAgICAgICAgICAgPSBIZWxwZXJzLkJsYXpvcklEVG9FbGVtZW50KGF3YWl0IHRoaXMuX2RvdE5ldEludGVyb3AuaW52b2tlTWV0aG9kQXN5bmMoXCJCdWlsZE5ld0J1aWxkaW5nQmxvY2tcIikpOyBcclxuICAgICAgICAgICAgcmV0dXJuIG5ld0NvbXBvbmVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIEZhaWxlZE5ld0J1aWxkaW5nQmxvY2soKTpcclxuICAgICAgICBQcm9taXNlPGFueT5cclxuICAgIHtcclxuICAgICAgICBpZih0aGlzLkNoZWNrQ29ubmVjdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCBuZXdDb21wb25lbnQ6IGFueVxyXG4gICAgICAgICAgICAgICAgPSBhd2FpdCB0aGlzLl9kb3ROZXRJbnRlcm9wLmludm9rZU1ldGhvZEFzeW5jKFwiQnVpbGROZXdCdWlsZGluZ0Jsb2NrXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3Q29tcG9uZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbiIsImltcG9ydCAqIGFzIE9yaVdlYiBmcm9tICcuL0NvcmUvQ2xpZW50LkltcG9ydEV4cG9ydGNvbnRyb2xsZXInO1xyXG5pbXBvcnQge0hlbHBlcnN9IGZyb20gXCIuL0NvcmUvQ2xpZW50LkltcG9ydEV4cG9ydGNvbnRyb2xsZXJcIjtcclxuXHJcbmRlY2xhcmUgdmFyIEJsYXpvcjogYW55O1xyXG5cclxuKGZ1bmN0aW9uKCl7XHJcbiAgICBCbGF6b3Iuc3RhcnQoe30pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZGVidWcoXCJCbGF6b3IgaGFzIGNvbm5lY3RlZFwiKTtcclxuICAgICAgICBcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCBcIkN1cnJlbnRPcmlTZXNzaW9uXCIsIHtcclxuICAgICAgICAgICAgdmFsdWU6IG5ldyBPcmlXZWIuQ29yZS5PcmlXZWJDbGllbnRTZXNzaW9uKCksXHJcbiAgICAgICAgICAgIHdyaXRhYmxlOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxufSkoKTtcclxuXHJcbihhc3luYyAoKSA9PntcclxuICAgIGF3YWl0IEhlbHBlcnMuV2FpdEZvckNvbm5lY3Rpb24oKTtcclxuXHJcbiAgICBsZXQgT3JpQ29tcG9uZW50MiA9IGF3YWl0IGdsb2JhbFRoaXMuQ3VycmVudE9yaVNlc3Npb24uV29ya2luZ05ld0J1aWxkaW5nQmxvY2soKTtcclxuICAgIGxldCBPcmlDb21wb25lbnQzID0gYXdhaXQgZ2xvYmFsVGhpcy5DdXJyZW50T3JpU2Vzc2lvbi5GYWlsZWROZXdCdWlsZGluZ0Jsb2NrKCk7XHJcbiAgICAoZ2xvYmFsVGhpcyBhcyBhbnkpLldvcmtpbmdDb21wb25lbnQgPSBPcmlDb21wb25lbnQyO1xyXG4gICAgKGdsb2JhbFRoaXMgYXMgYW55KS5GYWlsZWRDb21wb25lbnQgPSBPcmlDb21wb25lbnQzO1xyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZyhcIk5ldyBidWlsZGluZ2Jsb2NrIGNhbGxlZFwiKVxyXG59KSgpO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9